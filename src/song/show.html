<template>
  <require from="../resources/elements/ranked-detail"></require>

  <section>
    <h2>
      ${title}
      <span class="small" show.bind="score > 0">${score | decimal:2} #${rank}</span>
      <button class="btn-link" click.delegate="toggleEditMode()"><i class="fa fa-pencil"></i></button>
    </h2>
  </section>

  <section>
    <messages content="messages"></messages>
  </section>

  <section>
    <h3>Debut</h3>
    <div class="container">
      <div class="row" show.bind="decade">
        <div class="col-xs-3">${debutEra.title}</div>
        <div class="col-xs-1 text-right">
          <a href="#/decade/${debutEra.decade}s">${debutEra.decade}s</a>
        </div>
        <div class="col-xs-1 text-right">${decade.rank}</div>
        <div class="col-xs-3">
          <rank-bar
            rank.bind="ranks['decade:'+debutEra.decade+'s'].rank"
            count.bind="ranks['decade:'+debutEra.decade+'s'].total"
          ></rank-bar>
        </div>
      </div>
      <div class="row" show.bind="year">
        <div class="col-xs-3">&nbsp;</div>
        <div class="col-xs-1 text-right">
          <a href="#/year/${debutEra.year}">${debutEra.year}</a>
        </div>
        <div class="col-xs-1 text-right">${year.rank}</div>
        <div class="col-xs-3">
          <rank-bar rank.bind="year.rank" count.bind="year.count"></rank-bar>
        </div>
      </div>
    </div>
  </section>

  <section show.bind="artists | any">
    <h3>${artists | pluralCase:["Artist","Artists"]}</h3>
    <ranked-detail type-slug="artist" items.bind="artists" ranks.bind="ranks"></ranked-detail>
  </section>

  <section show.bind="genres | any">
    <h3>${genres | pluralCase:["Genre","Genres"]}</h3>
    <ranked-detail type-slug="genre" items.bind="genres" ranks.bind="ranks"></ranked-detail>
  </section>

  <section show.bind="sources | any">
    <h3>${sources | pluralCase:["Source","Sources"]}</h3>
    <ranked-detail type-slug="source" items.bind="sources" ranks.bind="ranks"></ranked-detail>
  </section>

  <section show.bind="playlists | any">
    <h3>${playlists | pluralCase:["Playlist","Playlists"]}</h3>
    <ranked-detail type-slug="playlist" items.bind="playlists" ranks.bind="ranks"></ranked-detail>
  </section>

  <section if.bind="score > 0">
    <h3>
      Scores
       <span class="small" show.bind="peak > 0">
         ${peak | decimal:3}
         <i class="fa fa-plus-square" show.bind="editMode"></i>
         <i class="fa fa-minus-square" show.bind="editMode"></i>
       </span>
       <span class="small" show.bind="ascentWeeks > 0">
         <i class="fa fa-chevron-up"></i>
         ${ascentWeeks | decimal:2}
         <i class="fa fa-plus-square" show.bind="editMode"></i>
         <i class="fa fa-minus-square" show.bind="editMode"></i>
       </span>
       <span class="small" show.bind="descentWeeks > 0">
         <i class="fa fa-chevron-down"></i>
         ${descentWeeks | decimal:2}
         <i class="fa fa-plus-square" show.bind="editMode"></i>
         <i class="fa fa-minus-square" show.bind="editMode"></i>
       </span>
    </h3>
  </section>

  <section if.bind="score > 0">
    <div class="graph">
      <div class="vertical-bar"
          style="width: ${100/scores.length}%; height: ${100*score}%;"
          repeat.for="score of scores"></div>
    </div>
  </section>

</template>
